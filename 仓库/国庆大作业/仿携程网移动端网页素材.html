<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>国庆作业</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/base.css">
    <link rel="stylesheet" href="./font/iconfont.css">
    <link rel="stylesheet" href="./css/index.css">

</head>

<body>
    <!-- 头部开始 -->
    <header>
        <div class="search">
            <input type="text" placeholder="搜索:目的地/酒店/经典/航班号">
        </div>
        <div class="home">
            <i></i>
            <p>我 的</p>
        </div>
    </header>
    <!-- 头部结束 -->

    <!-- 主体开始 -->
    <main>
        <!-- 轮播图 -->
        <div class="banner">
            <div>
                <img src="./仿携程网移动端页面素材/images/banner04.jpg" alt="0">
                <img src="./仿携程网移动端页面素材/images/banner01.jpg" alt="1">
                <img src="./仿携程网移动端页面素材/images/banner02.jpg" alt="2">
                <img src="./仿携程网移动端页面素材/images/banner03.jpg" alt="3">
                <img src="./仿携程网移动端页面素材/images/banner04.jpg" alt="4">
                <img src="./仿携程网移动端页面素材/images/banner01.jpg" alt="5">
            </div>
            <ul>
                <li class="active"></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
        </div>

        <!-- fiveMain -->
        <div class="fiveMain">
            <div class="one">
                <i></i>
                <p>攻略·经典</p>
            </div>
            <div class="two">
                <i></i>
                <p>门票·玩乐</p>
            </div>
            <div class="three">
                <i></i>
                <p>美食林</p>
            </div>
            <div class="four">
                <i></i>
                <p>周边游</p>
            </div>
            <div class="five">
                <i></i>
                <p>一日游</p>
            </div>
        </div>

        <!-- nav -->
        <nav>
            <p>酒店</p>
            <p>民宿·客栈</p>
            <p>火车票</p>
            <p>机票</p>
            <p>机票</p>
            <p>火车票</p>
            <p>汽车·船票</p>
            <p>专车·租车</p>
            <p>旅游</p>
            <p>高铁游</p>
            <p>邮轮游</p>
            <p>定制游</p>
        </nav>

        <!-- subnav -->
        <div class="subnav">
            <div>
                <i></i>
                <p>自由行</p>
            </div>
            <div>
                <i></i>
                <p>WiFi电话卡</p>
            </div>
            <div>
                <i></i>
                <p>保险·签证</p>
            </div>
            <div>
                <i></i>
                <p>换钞·购物</p>
            </div>
            <div>
                <i></i>
                <p>当地向导</p>
            </div>
            <div>
                <i></i>
                <p>特价机票</p>
            </div>
            <div>
                <i></i>
                <p>礼品卡</p>
            </div>
            <div>
                <i></i>
                <p>申卡·借钱</p>
            </div>
            <div>
                <i></i>
                <p>旅拍NEW</p>
            </div>
            <div>
                <i></i>
                <p>更多</p>
            </div>
        </div>

        <!-- tmh -->
        <div class="tmh clearfix">
            <div class="tmh_top clearfix">
                <i></i>
                <span>更多></span>
            </div>
            <div class="tmh_main clearfix">
                <div class="l">
                    <img src="./仿携程网移动端页面素材/images/pic-tmh-01.jpg" alt="">
                    <p>三亚5日自由行(5钻)·节后错峰款【高星度假型酒店合辑·4晚连住】预订赠出行礼遇·网红酒店|唯美海滩|亲子宅玩|海鲜盛宴|惬意泳池|热剧取景地·暖秋当红旅行地 累计超6万人真实出行！</p>
                    <p>￥<span>1504</span>起</p>
                </div>
                <div class="r_top">
                    <p>千款特价</p>
                    <p>走过路过不错过</p>
                </div>
                <div class="r_bottom_r">
                    <p>周边玩乐</p>
                    <p>欢乐度周末</p>
                </div>
                <div class="r_bottom_l">
                    <p>境外精选</p>
                    <p>限时抢购</p>
                </div>

            </div>
        </div>

        <!-- huodong -->
        <div class="huodong">
            <div class="huodong_top clearfix">
                <i><img src="./仿携程网移动端页面素材/images/icon-gg.png" alt=""></i>
                <span>获取更多福利></span>
            </div>
            <div class="huodong_main">
                <a href="#"><img src="./仿携程网移动端页面素材/images/huodong01.png" alt="huodong01"></a>
                <a href="#"><img src="./仿携程网移动端页面素材/images/huodong02.png" alt="huodong02"></a>
                <a href="#"><img src="./仿携程网移动端页面素材/images/huodong03.jpg" alt="huodong03"></a>
                <a href="#"><img src="./仿携程网移动端页面素材/images/huodong04.jpg" alt="huodong04"></a>
                <a href="#"><img src="./仿携程网移动端页面素材/images/huodong05.jpg" alt="huodong05"></a>
                <a href="#"><img src="./仿携程网移动端页面素材/images/huodong06.jpg" alt="huodong06"></a>
            </div>
        </div>


    </main>
    <!-- 主体结束 -->

    <!-- 脚部开始 -->
    <footer>
        <div class="footer_top">
            <div>
                <i class="iconfont icon-dianhua"></i>
                <p>电话预订</p>
            </div>
            <div>
                <i class="iconfont icon-xiazai"></i>
                <p>下载客户端</p>
            </div>
            <div>
                <i class="iconfont icon-wode-"></i>
                <p>我 的</p>
            </div>
        </div>

        <div class="footer_bottom">
            <p>网站地图｜<i class="iconfont icon-diqiu"></i>Language<i class="iconfont icon-xiangxiajiantou"></i>｜ 电脑版</p>
            <p><i class="iconfont icon-copyright"></i>2019粤嵌H5前端开发｜粤ICP备XXXXXXXX号-XXXXXX</p>
        </div>
    </footer>
    <!-- 脚部结束 -->

    <script>
        // 获取heafer
        var _header = document.querySelector("header");
        // 获取banner
        var _banner = document.querySelector(".banner");
        // banner下的div
        var _banner_div = document.querySelector(".banner div");
        // 获取ul
        var _ul = document.querySelector(".banner ul");

        // 宽度
        var w = _banner.offsetWidth;

        // 定时器
        var timer = null;

        // 2. 利用定时器自动轮播图片
        // 下标
        var index = 1;

        timer = setInterval(function () {
            index++;
            var translateX = -index * w;
            // 添加动画效果
            _banner_div.style.transition = 'all .3s';
            _banner_div.style.transform = 'translateX(' + translateX + 'px)';
        }, 2000);

        // 过渡完成
        _banner_div.addEventListener('transitionend', function () {
            if (index === 5) {
                // 去掉过渡效果，快速的跳到目标位置
                _banner_div.style.transition = 'none';
                index = 1;
                // 利用最新的索引号乘以宽度，继续滚动图片
                var translateX = -index * w;
                _banner_div.style.transform = 'translateX(' + translateX + 'px)';
            }

            if (index === 0) {
                // 去掉过渡效果，快速的跳到目标位置
                _banner_div.style.transition = 'none';
                index = 4;
                // 利用最新的索引号乘以宽度，继续滚动图片
                var translateX = -index * w;
                _banner_div.style.transform = 'translateX(' + translateX + 'px)';
            }

            // 3. 小圆点跟随变化
            // 把ul里面li带有active类名的选出来，去掉类名remove
            _ul.querySelector('.active').classList.remove('active');

            // 让当前索引号的li加上active类名add
            _ul.children[index - 1].classList.add('active');
        });

        // 4. 手指滑动轮播图
        // 触摸元素touchstart：获取手指初始坐标
        var startX = 0;
        var moveX = 0;  // 后面会使用这个移动距离，所以要定义为全局变量
        var flag = false;  //用来标志手指是否真的移动，还是只是点击

        _banner.addEventListener('touchstart', function (e) {
            startX = e.targetTouches[0].pageX;
            // console.log("startX", startX);
            // 手指触摸的时候就停止定时器
            clearInterval(timer);
            timer = null;
        });

        // 移动手指touchmove：计算手指的滑动距离，并且移动盒子
        _banner.addEventListener('touchmove', function (e) {
            // 计算移动距离
            // e.targetTouches[0]为第一个手指，[1]表示第二个手指
            moveX = e.targetTouches[0].pageX - startX;
            // console.log("moveX", moveX);
            // 移动盒子：盒子原来的位置 + 手指移动的距离

            var translateX = -index * w + moveX;
            // 手指拖动的时候，不需要动画效果，所以要取消过渡效果
            _banner_div.style.transition = 'none';
            _banner_div.style.transform = 'translateX(' + translateX + 'px)';
            flag = true;
            // e.preventDefault();   //组织滚动屏幕的行为
        });

        // 手指离开，根据移动距离去判断是回弹还是播放上一张或者下一张
        _banner.addEventListener('touchend', function (e) {
            // 只有手指移动过了，才执行下面的代码
            if (flag) {
                //（1）如果移动距离大于100像素，则播放上一张或者下一张
                if (Math.abs(moveX) > 100) {
                    // 如果是右滑就是播放上一张，moveX是正值
                    if (moveX > 0) {
                        // index等于0时不能再减
                        if (index > 0) {
                            index--;
                        }
                    } else {
                        // 如果是左滑就是播放下一张，moveX是负值
                        // index等于5时不能再加
                        if (index < 5) {
                            index++;
                        }
                    }
                    // 用最新的index乘以宽度
                    var translateX = -index * w;
                    _banner_div.style.transition = 'all .3s';
                    _banner_div.style.transform = 'translateX(' + translateX + 'px)';
                } else {
                    //（2）如果移动距离小于100像素就回弹
                    var translateX = -index * w;
                    _banner_div.style.transition = 'all .1s';
                    _banner_div.style.transform = 'translateX(' + translateX + 'px)';
                }

                flag = false;
            }


            // 手指离开的时候就重新开启定时器
            // 注意：开启定时器之前要先清空之前的定时器，保证当前只有一个定时器在执行
            clearInterval(timer);
            timer = setInterval(function () {
                index++;
                var translateX = -index * w;
                // 添加动画效果
                _banner_div.style.transition = 'all .3s';
                _banner_div.style.transform = 'translateX(' + translateX + 'px)';
            }, 2000);
        });

        // 页面滚动
        window.addEventListener('scroll', function () {
            if (pageYOffset > 50) {
                _header.style.backgroundColor = "#fff";
                opacity = 1;
                _header.querySelector(".home i").style.background = "url(./仿携程网移动端页面素材/images/home-common.png) no-repeat center -5.5em / 1.5em";
                _header.querySelector(".home p").style.color = "#000";
                _header.querySelector("input").style.backgroundColor = "#dbdbdb";

            } else {
                _header.style.backgroundColor = "";
                opacity = .6;
                _header.querySelector(".home i").style.background = "url(./仿携程网移动端页面素材/images/home-common.png) no-repeat center -2.5em / 1.5em";
                _header.querySelector(".home p").style.color = "#fff";
                _header.querySelector("input").style.backgroundColor = "#fff";

            }
        })

    </script>
</body>

</html>